<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Xcode中断点的威力-sunshine of micro</title>
	<link rel="stylesheet" type="text/css" href="./css/common.css">
	<link rel="stylesheet" type="text/css" href="./css/index.css">
	<link rel="stylesheet" type="text/css" href="./css/layout.css">
</head>
<body>
<div class="wrap">
	<header>
	<div>
		<span class="title">THE SUNSHINE OF MICRO</span>	
	</div>
	
</header>
	<aside>
    <span class="cate-txt">Categories</span> 
	<ul>
		<li><a href="./index.html">index</a></li>
		<li>web</li>
		<li>android</li>
		<li>ios</li>
		<li>life</li>
		<li>game</li>
		<li>book</li>
		<li>php</li>
	</ul>
</aside><article>
		<div class="markdown-body">
			<p>title: Xcode中断点的威力
author: BeyondVincent
layout: post</p>
<h2>simplecatch-sidebarlayout:</h2>
<p>duoshuo_thread_id:</p>
<ul>
<li>1248139211572248689
ludou_ratings_score:</li>
<li>1
categories:</li>
<li>iOS翻译
tags:</li>
<li>Xcode</li>
</ul>
<hr>
<p>注：本文由破船译自：<span style="text-decoration: underline;"><strong><span style="color: #339966; text-decoration: underline;"><a href="http://www.albertopasca.it/whiletrue/2013/06/xcode-power-of-breakpoints/" target="_blank"><span style="color: #339966; text-decoration: underline;">albertopasca</span></a></span></strong></span><br>
本文由<strong><span style="color: #339966;">HoNooD</span></strong>在<strong><span style="text-decoration: underline;"><span style="color: #339966; text-decoration: underline;"><a href="http://iosfeed.com/view/76" target="_blank"><span style="color: #339966; text-decoration: underline;">iosfeed</span></a></span></span></strong>站点上做了推荐。</p>
<p>这里先推荐两篇Xcode相关的文章：<br>
<strong><span style="text-decoration: underline;"><span style="color: #339966; text-decoration: underline;"><a href="http://beyondvincent.com/2013/05/31/xcode-code-snippets/" target="_blank"><span style="color: #339966; text-decoration: underline;">Xcode Code Snippets</span></a></span></span></strong><br>
<strong><span style="text-decoration: underline;"><span style="color: #339966; text-decoration: underline;"> <a href="http://beyondvincent.com/2013/05/16/ios%E4%B8%AD%E8%B0%83%E8%AF%95-%E5%9F%BA%E6%9C%AC%E6%8A%80%E5%B7%A7/" target="_blank"><span style="color: #339966; text-decoration: underline;">iOS调试 — 基本技巧</span></a></span></span></strong></p>
<p>本文目录：</p>
<p><strong><span style="color: #339966;">1、添加一个特殊的断点</span></strong><br>
<strong><span style="color: #339966;">    异常断点(Exception breakpoint)</span></strong><br>
<strong><span style="color: #339966;">    符号断点(Symbolic breakpoint)</span></strong><br>
<strong><span style="color: #339966;">2、打印到控制台</span></strong><br>
<strong><span style="color: #339966;">    使用NSLog打印字符串</span></strong><br>
<strong><span style="color: #339966;">    使用NSLog打印对象(po)</span></strong><br>
<strong><span style="color: #339966;">    带条件的打印</span></strong><br>
<strong><span style="color: #339966;">    在循环里面打印一些东西</span></strong><br>
<strong><span style="color: #339966;">3、运行时设置断点</span></strong><br>
<strong><span style="color: #339966;">4、调试中播放声音</span></strong><br>
<strong><span style="color: #339966;">5、LLDB中有用的一些命令</span></strong><br>
<strong><span style="color: #339966;">    打印帮助</span></strong><br>
<strong><span style="color: #339966;">    打印调用栈</span></strong><br>
<strong><span style="color: #339966;">    打印最基本的内容 (p)</span></strong><br>
<strong><span style="color: #339966;">    打印对象(po)</span></strong><br>
<strong><span style="color: #339966;">    打印表达式(expr)</span></strong><br>
<strong><span style="color: #339966;">    打印线程中的一些东西</span></strong></p>
<p> </p>
<p>正文</p>
<p>下面是非常有用的一些Xcode调试技术(使用断点和LLDB调试器)</p>
<p>1、添加一个特殊的断点</p>
<ul>
<li>异常断点(Exception breakpoint)</li>
</ul>
<p>如果添加了异常断点，当程序每次发生了异常，都会被中断。<strong><span style="color: #339966;">一般用来捕获未知异常</span></strong>。如下示例：</p>
<pre class="wp-code-highlight prettyprint linenums:1">*** Terminating app due to uncaught exception ’NSRangeException’, reason:
’-[__NSCFArray objectAtIndex:]: index (10) beyond bounds (3)</pre>
<ul>
<li>符号断点(Symbolic breakpoint)</li>
</ul>
<p>符号断点可以中断某个函数的调用。</p>
<pre class="wp-code-highlight prettyprint linenums:1">- [UIViewController viewDidLoad]
- [__NSCFArray objectAtIndex:]</pre>
<p> </p>
<p>2、打印到控制台</p>
<ul>
<li>使用NSLog打印字符串</li>
</ul>
<p>使用断点来替换NSLog代码(或者在运行时添加一个NSLog)——与代码写NSLog的效果相同。</p>
<p> </p>
<ul>
<li>使用NSLog打印对象(po)</li>
</ul>
<pre class="wp-code-highlight prettyprint linenums:1">NSLog(@"obj: %@", obj);</pre>
<ul>
<li>带条件的打印</li>
</ul>
<p>例如：当aNumber大于10才打印出“str”的内容。</p>
<pre class="wp-code-highlight prettyprint linenums:1">expr (void)NSLog(@"Ok, print a log: %@", str)</pre>
<p> </p>
<ul>
<li>在循环里面打印一些东西</li>
</ul>
<p>例如，在循环中希望i大于5才开始打印。</p>
<pre class="wp-code-highlight prettyprint linenums:1">for ( int i=0; i&lt;10; i++ )
{
[self self]; // something
}</pre>
<p>使用“ignore”值，并利用下面的代码进行打印：</p>
<pre class="wp-code-highlight prettyprint linenums:1">expr (void)NSLog(@"Ok, print a log: %@", str)</pre>
<p>3、运行时设置断点</p>
<p>在运行的时候，根据条件设置断点有时候非常有用。</p>
<pre class="wp-code-highlight prettyprint linenums:1">breakpoint set -f APViewController.m -l 33</pre>
<p>4、调试中播放声音</p>
<p>5、LLDB中有用的一些命令</p>
<p>当Xcode停留在某个断点时，我们可以通过控制台(console)与<strong><span style="color: #339966;">lldb</span></strong>进行交互。</p>
<ul>
<li>打印帮助</li>
</ul>
<pre class="wp-code-highlight prettyprint linenums:1">(lldb) help</pre>
<ul>
<li>打印调用栈(bt)</li>
</ul>
<pre class="wp-code-highlight prettyprint linenums:1">(lldb) bt
* thread #1: tid = 0x1c03, 0x00003146 Debug`-[APViewController callMe:andANumber:](self=0x07187e50, _cmd=0x000038b9, str=0x0715aa40, aNum=38) + 230 at APViewController.m:33, stop reason = breakpoint 3.1
frame #0: 0x00003146 Debug`-[APViewController callMe:andANumber:](self=0x07187e50, _cmd=0x000038b9, str=0x0715aa40, aNum=38) + 230 at APViewController.m:33
frame #1: 0x0000304a Debug`-[APViewController viewDidLoad](self=0x07187e50, _cmd=0x005c5a77) + 122 at APViewController.m:16
frame #2: 0x000f41c7 UIKit`-[UIViewController loadViewIfRequired] + 536
frame #3: 0x000f4232 UIKit`-[UIViewController view] + 33
frame #4: 0x000433d5 UIKit`-[UIWindow addRootViewControllerViewIfPossible] + 66
frame #5: 0x0004376f UIKit`-[UIWindow _setHidden:forced:] + 368
frame #6: 0x00043905 UIKit`-[UIWindow _orderFrontWithoutMakingKey] + 49
frame #7: 0x0004c917 UIKit`-[UIWindow makeKeyAndVisible] + 65
frame #8: 0x00002e1b Debug`-[APAppDelegate application:didFinishLaunchingWithOptions:](self=0x07560750, _cmd=0x005a9c21, application=0x0716a640, launchOptions=0x00000000) + 571 at APAppDelegate.m:28
frame #9: 0x00010157 UIKit`-[UIApplication _handleDelegateCallbacksWithOptions:isSuspended:restoreState:] + 266
frame #10: 0x00010747 UIKit`-[UIApplication _callInitializationDelegatesForURL:payload:suspended:] + 1248
frame #11: 0x0001194b UIKit`-[UIApplication _runWithURL:payload:launchOrientation:statusBarStyle:statusBarHidden:] + 805
frame #12: 0x00022cb5 UIKit`-[UIApplication handleEvent:withNewEvent:] + 1022
frame #13: 0x00023beb UIKit`-[UIApplication sendEvent:] + 85
frame #14: 0x00015698 UIKit`_UIApplicationHandleEvent + 9874
frame #15: 0x01becdf9 GraphicsServices`_PurpleEventCallback + 339
frame #16: 0x01becad0 GraphicsServices`PurpleEventCallback + 46
frame #17: 0x01c06bf5 CoreFoundation`__CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 53
frame #18: 0x01c06962 CoreFoundation`__CFRunLoopDoSource1 + 146
frame #19: 0x01c37bb6 CoreFoundation`__CFRunLoopRun + 2118
frame #20: 0x01c36f44 CoreFoundation`CFRunLoopRunSpecific + 276
frame #21: 0x01c36e1b CoreFoundation`CFRunLoopRunInMode + 123
frame #22: 0x0001117a UIKit`-[UIApplication _run] + 774
frame #23: 0x00012ffc UIKit`UIApplicationMain + 1211
frame #24: 0x00002b22 Debug`main(argc=1, argv=0xbffff3a4) + 130 at main.m:16
frame #25: 0x00002a55 Debug`start + 53
(lldb)</pre>
<ul>
<li>打印最基本的内容 (p)</li>
</ul>
<pre class="wp-code-highlight prettyprint linenums:1">(lldb) print anInt</pre>
<ul>
<li>打印对象(po)</li>
</ul>
<pre class="wp-code-highlight prettyprint linenums:1">(lldb) po anObj
(lldb) po 0x0715aa40</pre>
<ul>
<li>打印表达式(expr)</li>
</ul>
<pre class="wp-code-highlight prettyprint linenums:1">(lldb) expr 5+2
(lldb) expr aString = @"aNewValue"</pre>
<ul>
<li>打印线程中的一些东西</li>
</ul>
<pre class="wp-code-highlight prettyprint linenums:1">(lldb) help frame</pre>
<div style="text-align: left;">
  <span style="color: #808080;">本文由<strong><span style="text-decoration: underline; color: #339966;"><a href="http://beyondvincent.com/"><span style="color: #339966; text-decoration: underline;">破船</span></a></span></strong>翻译●转载请注明出处●<time datetime="2013-05-18T17:37:00+08:00" data-updated="true">2013-07-01</time></span>
</div>
	
		</div>
			
	</article>
	<footer>
	<span class="copy-right">© 2016 sunshine of micro, Inc.</span>
</footer>	
</div>

</body>
</html>